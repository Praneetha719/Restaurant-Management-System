{% extends 'base.html' %}
{% block content %}
<h2>Menu</h2>
{% if user.role == 'admin' %}
<p><a class="button" href="/add_item">Add New Item</a></p>
{% endif %}
<table>
    <tr><th>ID</th><th>Name</th><th>Price</th>{% if user.role == 'admin' %}<th>Actions</th>{% endif %}</tr>
    {% for it in items %}
    <tr>
        <td>{{ it.id }}</td>
        <td>{{ it.name }}</td>
        <td>${{ '%.2f'|format(it.price) }}</td>
        {% if user.role == 'admin' %}
        <td>
            <a href="/update_item/{{ it.id }}" class="button-small">Edit</a>
            <form action="/delete_item/{{ it.id }}" method="post" style="display:inline" onsubmit="return confirm('Are you sure you want to delete this item?');">
                <button type="submit" class="button-small button-danger">Delete</button>
            </form>
        </td>
        {% endif %}
    </tr>
    {% else %}
    <tr><td colspan="{% if user.role == 'admin' %}4{% else %}3{% endif %}">No items yet.</td></tr>
    {% endfor %}
</table>
{% endblock %}
