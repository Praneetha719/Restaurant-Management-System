{% extends 'base.html' %}
{% block content %}
<h2>{% if user.role == 'admin' %}All Orders{% else %}My Orders{% endif %}</h2>
{% if orders_with_items %}
    {% for order_data in orders_with_items %}
    <div class="order-card">
        <div class="order-header">
            <h3>Order #{{ order_data.order.id }}</h3>
            <div class="order-info">
                <p><strong>Date:</strong> {{ order_data.order.order_date }}</p>
                <p><strong>Cashier:</strong> {{ order_data.order.cashier_name }}</p>
                <p><strong>Total:</strong> ${{ '%.2f'|format(order_data.order.total_amount) }}</p>
            </div>
        </div>
        <table class="order-items">
            <tr><th>Item</th><th>Quantity</th><th>Unit Price</th><th>Total</th></tr>
            {% for item in order_data.order_items %}
            <tr>
                <td>{{ item.item_name }}</td>
                <td>{{ item.quantity }}</td>
                <td>${{ '%.2f'|format(item.price) }}</td>
                <td>${{ '%.2f'|format(item.price * item.quantity) }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endfor %}
{% else %}
    <p>No orders found.</p>
{% endif %}
{% endblock %}

